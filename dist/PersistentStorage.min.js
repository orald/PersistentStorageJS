/*! PersistentStorage 10-04-2013 */
var PersistentStorage=function(){function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=RegExp("^"+this.prefix)}function e(){return(new Date).getTime()}function i(t){return JSON.stringify(utils.isUndefined(t)?null:t)}function r(t){return JSON.parse(t)}var n,s=window.localStorage;return n=window.localStorage&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),r(s.getItem(this._prefix(t)))},set:function(t,r,n){return utils.isNumber(n)?s.setItem(this._ttlKey(t),i(e()+n)):s.removeItem(this._ttlKey(t)),s.setItem(this._prefix(t),i(r))},remove:function(t){return s.removeItem(this._ttlKey(t)),s.removeItem(this._prefix(t)),this},clear:function(){var t,e,i=[],r=s.length;for(t=0;r>t;t++)(e=s.key(t)).match(this.keyMatcher)&&i.push(e.replace(this.keyMatcher,""));for(t=i.length;t--;)this.remove(i[t]);return this},isExpired:function(t){var i=r(s.getItem(this._ttlKey(t)));return utils.isNumber(i)&&e()>i?!0:!1}}:{get:utils.noop,set:utils.noop,remove:utils.noop,clear:utils.noop,isExpired:utils.noop},utils.mixin(t.prototype,n),t}();